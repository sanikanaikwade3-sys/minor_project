<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gallery • Alumni Connect</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      .gallery-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 1.6rem;
      }
      .gallery-card {
        border-radius: 1.2rem;
        overflow: hidden;
        box-shadow: 0 16px 32px rgba(15, 23, 42, 0.9);
        background: #020617;
      }
      .gallery-card img {
        width: 100%;
        height: 220px;
        object-fit: cover;
        display: block;
      }
      .gallery-caption {
        padding: 0.9rem 1rem 1rem;
        font-size: 0.85rem;
        color: #e5e7eb;
      }
      .gallery-caption span {
        display: block;
        font-size: 0.8rem;
        color: #9ca3af;
        margin-top: 0.25rem;
      }

      /* ADD IMAGE FORM */
      .add-gallery-box {
        max-width: 420px;
        margin: 2rem auto;
        background: #020617;
        padding: 1.2rem;
        border-radius: 1rem;
        display: none;
      }
      .add-gallery-box input,
      .add-gallery-box textarea {
        width: 100%;
        margin-bottom: 0.6rem;
        padding: 0.5rem;
        border-radius: 0.4rem;
        border: none;
      }
    </style>
  </head>

  <body>
    <header class="navbar">
      <div class="nav-left">
        <div class="logo-wrapper">
          <img src="mitaoe-logo.png" alt="MITAOE logo" class="logo-img" />
        </div>
        <div class="brand">
          <span class="brand-title">Alumni Connect</span>
          <span class="brand-subtitle">Students × Alumni</span>
        </div>
      </div>
      <nav class="nav-links">
        <a href="index.html" class="nav-link">Home</a>
        <a href="about.html" class="nav-link">About</a>
        <a href="communities.html" class="nav-link">Communities</a>
        <a href="events.html" class="nav-link">Events</a>
        <a href="projects.html" class="nav-link">Projects</a>
        <a href="gallery.html" class="nav-link nav-link-active">Gallery</a>
        <a href="contact.html" class="nav-link">Contact</a>
      </nav>
      <div class="nav-actions">
        <button class="btn btn-ghost auth-btn">Sign In</button>
        <button class="btn btn-primary auth-btn">Sign Up</button>
      </div>
    </header>

    <main>
      <section class="section">
        <div class="section-header">
          <h2>Gallery</h2>
          <p>
            A visual timeline of alumni success stories, student achievements and
            campus activities.
          </p>
        </div>

        <!-- ADD IMAGE BUTTON (ADMIN / ALUMNI ONLY) -->
        <div style="text-align:center;">
          <button id="addGalleryBtn" class="btn btn-primary" style="display:none;">
            Add Image
          </button>
        </div>

        <!-- ADD IMAGE FORM -->
        <div class="add-gallery-box" id="galleryForm">
          <input type="text" id="imgUrl" placeholder="Image URL" />
          <textarea id="imgCaption" placeholder="Main caption"></textarea>
          <input type="text" id="imgSub" placeholder="Sub caption" />
          <button class="btn btn-primary btn-full" onclick="addGalleryImage()">
            Save Image
          </button>
        </div>

        <div class="gallery-grid" id="galleryGrid">
          <!-- EXISTING STATIC CARD (UNCHANGED) -->
          <div class="gallery-card">
            <img src="alumni-barc.png" />
            <div class="gallery-caption">
              Alumni achievement: Scientific Officer at BARC.
              <span>Chemical Department • Alumni 2023–24</span>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <p>© Alumni Connect</p>
    </footer>

    <script>
      /* ====== DEMO ROLE SETUP ======
         Change role as needed:
         "admin" | "alumni" | "student"
      ================================= */
      localStorage.setItem("role", "admin");

      const role = localStorage.getItem("role");

      if (role === "admin" || role === "alumni") {
        document.getElementById("addGalleryBtn").style.display = "inline-block";
      }

      document.getElementById("addGalleryBtn").onclick = () => {
        document.getElementById("galleryForm").style.display = "block";
      };

      function addGalleryImage() {
        const url = imgUrl.value;
        const caption = imgCaption.value;
        const sub = imgSub.value;

        const images = JSON.parse(localStorage.getItem("galleryImages") || "[]");
        images.push({ url, caption, sub });
        localStorage.setItem("galleryImages", JSON.stringify(images));
        location.reload();
      }

      const savedImages = JSON.parse(localStorage.getItem("galleryImages") || "[]");
      savedImages.forEach(img => {
        galleryGrid.innerHTML += `
          <div class="gallery-card">
            <img src="${img.url}">
            <div class="gallery-caption">
              ${img.caption}
              <span>${img.sub}</span>
            </div>
          </div>
        `;
      });
    </script>
  </body>
</html>
