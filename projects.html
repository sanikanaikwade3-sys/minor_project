<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Projects • Alumni Connect</title>

  <link rel="stylesheet" href="styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>

  <style>
    .section-actions {
      text-align: right;
      margin-bottom: 1rem;
    }
    .hidden { display: none; }

    /* Modal */
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.7);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .modal-content {
      background: #020617;
      padding: 1.5rem;
      border-radius: 1rem;
      width: 420px;
    }
    .modal-content input,
    .modal-content textarea {
      width: 100%;
      margin-bottom: 0.7rem;
      padding: 0.5rem;
      border-radius: 0.4rem;
      border: none;
    }
  </style>
</head>

<body>
<header class="navbar">
  <div class="brand">
    <span class="brand-title">Alumni Connect</span>
  </div>
</header>

<main>
  <section class="section">
    <div class="section-header">
      <h2>Student–Alumni Projects</h2>
      <p>Collaborative projects created by alumni and students.</p>
    </div>

    <!-- ADMIN / ALUMNI ACTION -->
    <div class="section-actions">
      <button id="addProjectBtn" class="btn btn-primary hidden">
        Add Project
      </button>
    </div>

    <!-- PROJECT GRID -->
    <div class="about-grid" id="projectGrid"></div>
  </section>
</main>

<!-- ADD PROJECT MODAL -->
<div id="projectModal" class="modal hidden">
  <div class="modal-content">
    <h3>Add New Project</h3>
    <input id="projectTitle" placeholder="Project Title" />
    <textarea id="projectDesc" placeholder="Project Description"></textarea>
    <button class="btn btn-primary btn-full" id="saveProjectBtn">
      Save Project
    </button>
  </div>
</div>

<script>
/* =====================
   AUTH (Mock – Backend Ready)
===================== */
function getCurrentUser() {
  return {
    id: "u101",
    role: localStorage.getItem("role") || "student" 
    // admin | alumni | student
  };
}

const user = getCurrentUser();

/* =====================
   ROLE-BASED UI
===================== */
if (user.role === "admin" || user.role === "alumni") {
  document.getElementById("addProjectBtn").classList.remove("hidden");
}

/* =====================
   API-STYLE FUNCTIONS
===================== */
async function fetchProjects() {
  // Later: GET /api/projects
  return [
    {
      title: "Placement Tracker Dashboard",
      description: "Platform for placement guidance with alumni insights."
    },
    {
      title: "Smart Campus Energy Monitor",
      description: "IoT-based system for optimizing campus energy usage."
    }
  ];
}

async function createProject(project) {
  // Later: POST /api/projects
  console.log("Sending project to backend:", project);
}

/* =====================
   RENDER PROJECTS
===================== */
async function renderProjects() {
  const projects = await fetchProjects();
  const grid = document.getElementById("projectGrid");

  grid.innerHTML = "";
  projects.forEach(p => {
    grid.innerHTML += `
      <div class="about-card">
        <h3>${p.title}</h3>
        <p>${p.description}</p>
      </div>
    `;
  });
}

/* =====================
   EVENTS
===================== */
addProjectBtn.onclick = () => {
  projectModal.classList.remove("hidden");
};

saveProjectBtn.onclick = async () => {
  await createProject({
    title: projectTitle.value,
    description: projectDesc.value,
    createdBy: user.id
  });
  projectModal.classList.add("hidden");
  renderProjects();
};

renderProjects();
</script>
</body>
</html>
